{% if not show_menu %}
<style type="text/css">
  body {
    background: transparent;
  }

  .main {
    padding: 0px;
  }

  .nav {
    display: none;
  }

  .nav-left {
    display: none;
  }

  .x-body {
    left: 0px;
  }
</style>
{% end %}

{% if not show_search %}
<style type="text/css">
  .nav-left-search {
    display: none;
  }

  .search-box {
    display: none;
  }
</style>
{% end %}

{% if xconfig.DEBUG_HTML_BOX %}
<!-- 用于移动端或者其他不方便调试设备的样式调试 -->
<style type="text/css">
  * {
    box-sizing: border-box;
    border: solid 1px red;
  }
</style>
{% end %}


{# 侧边栏(右侧)是否显示 #}
{% if not show_aside %}
<style type="text/css">
  .x-body {
    right: 0px;
  }

  .aside {
    display: none;
  }
</style>
{% end %}

{% if _user_config.show_sidebar == "false" %}
<style type="text/css">
  .content-left {
    width: 100%;
  }

  .content-right {
    display: none;
  }
</style>
{% end %}

<!--
白色样式
<style type="text/css">
.nav {
  background-color: white;
}

.nav-item>a {
  color: black;
}
</style>
-->

<style type="text/css" id="layout-css"></style>

<script type="text/javascript">
  // JavaScript执行的顺序和<script>标签定义的顺序有关
  // 这里动态生成<style>不会导致闪烁
  (function () {
    function loadStyle() {
      var navStyle = "{{_user_config.nav_style}}";
      var contentWidth = parseInt("{{CONTENT_WIDTH}}");
      var winWidth = $(window).width(); // 窗口的宽度
      var leftNavWidth = 0; // 左侧导航的宽度

      if (navStyle == "left" && xnote.isDesktop()) {
        leftNavWidth = 180;
        xnote.device.leftNavWidth = leftNavWidth;
      }

      var bodyWidth = winWidth - leftNavWidth;
      var marginLeft = (bodyWidth - contentWidth) / 2 + leftNavWidth;
      // 设置最小的高度
      var rootMinHeight = $(window).height() - 39;

      if (winWidth < contentWidth + leftNavWidth) {
        contentWidth = winWidth - leftNavWidth;
        marginLeft = leftNavWidth;
      }

      var styleText = ".x-center, .nav-container {"
        + "float:left;"
        + "width:" + contentWidth + "px;"
        + "margin-left:" + marginLeft + "px;"
        + "}";

      if (winWidth > contentWidth + leftNavWidth) {
        styleText += ".mobile-only {display: none;}";
      } else {
        styleText += ".desktop-only {display: none;}";
      }

      styleText += ".main-content { width:" + contentWidth + "px; margin-left:" + marginLeft + "px;}";
      styleText += ".root{ min-height:" + rootMinHeight + "px;}";

      var leftRatio = 0.7;
      if (contentWidth>=xnote.MOBILE_MAX_WIDTH) {
        leftRatio = 0.7;
        styleText += ".content-left { width:70%; }";
        styleText += ".content-right { width:30%; }";
      } else {
        leftRatio = 1.0;
        styleText += ".content-left { width: 100%; }";
        styleText += ".content-right { display: none; }";
      }

      // 设备大小信息
      xnote.device.isMobile = winWidth < xnote.MOBILE_MAX_WIDTH;
      xnote.device.isDesktop = winWidth >= xnote.MOBILE_MAX_WIDTH;
      xnote.device.contentWidth = contentWidth;
      xnote.device.contentLeftWidth = parseInt(contentWidth * leftRatio);

      // 居中的样式
      $("#layout-css").html(styleText);
    };

    loadStyle();

    $(window).on("resize", loadStyle);
    
  })();
</script>