{% extends base/base.html %}

{% block body_left %}
    {% init ext_groups = None %}

    {% include note/component/view_css.html %}

    <div class="card">
        <div class="grid-title">
            <span>{{title}}</span>
            <div class="float-right">
                <a class="btn btn-default" href="/note/group/manage">管理笔记本</a>
                <a class="btn btn-default" href="/note/tools?category=note">工具</a>
                {% if show_back %}
                    {% include common/button/back_button.html %}
                {% end %}
            </div>
        </div>

        {% include note/component/script/create_script.html %}
    </div>

    <div class="card">
        <div class="x-tab-box" data-tab-default="active" data-tab-key="tab">
            <a class="x-tab" data-tab-value="active">
                活跃(<span class="task-count">{{active_count}}</span>)
            </a>
            <a class="x-tab" data-tab-value="archived" href="/note/group_list?tab=archived">
                归档(<span class="task-count">{{archived_count}}</span>)
            </a>
            <a class="x-tab" data-tab-value="smart" 
                href="/note/group_list?show_note_types=false&tab=smart">
                智能(<span class="task-count">{{smart_count}}</span>)
            </a>
        </div>
    </div>

    {% if tab == "active" %}
        {% if _user_config.show_sidebar == "false" or _is_mobile %}
            {% include note/component/group_special_folder.html %}
        {% end %}

        {% include note/component/filter/group_tag_filter.html %}
    {% end %}

    <!-- 笔记本列表 -->
    {% set files = groups %}
    {% include note/component/note_list_component.html %}

    <script>
    $(".switch-category").change(function(e) {
        var selected = $(this).val();
        var url = window.location.href;
        url = xnote.addUrlParam(url, "category", selected);
        window.location.href = url;
    });
    </script>

{% end %}

{% block body_right %}
    {% include note/component/sidebar/group_list_sidebar.html %}
{% end %}

