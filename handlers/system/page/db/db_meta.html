{% extends base %}

{% block body_left %}
<style>
    .key { width: 75%; }
    .admin-stat-th { width: 25% }
</style>

{% include system/component/db_nav.html %}
{% init show_delete = False %}

<div class="card admin-stat">
    <div class="card-title"> 
        <span>元数据</span>

        <div class="float-right">
            {% if show_delete == False %}
                <a class="btn btn-default" href="?p=meta&show_delete=true">查看删除的表</a>
            {% else %}
                <a class="btn btn-default" href="?p=meta">查看活跃的表</a>
            {% end %}
            
            {% if hide_index != "true" %}
                <a class="btn btn-default" href="?p={{p}}&hide_index=true&tab=meta">隐藏索引</a>
            {% else %}
                <a class="btn btn-default" href="?p={{p}}&hide_index=false&tab=meta">展示索引</a>
            {% end %}
        </div>
    </div>
    <table class="table">
        <tr>
            <th class="admin-stat-th">类别</th>
            <th class="admin-stat-th">项目</th>
            <th class="admin-stat-th">说明</th>
            <th class="admin-stat-th">数量</th>
        </tr>
        {% for cat, key, description, value in admin_stat_list %}
            <tr>
                <td>{{cat}}</td>
                <td><a href="{{_server_home}}/system/db_scan?prefix={{key}}&reverse=true">{{key}}</a></td>
                <td>{{description}}</td>
                <td>{{value}}</td>
            </tr>
        {% end %}
    </table>
</div>

{% end %}

{% block body_right %}
    {% include system/component/admin_nav.html %}
{% end %}
